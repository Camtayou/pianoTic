package com.example.pianotiles

import android.content.Context
import android.media.MediaPlayer

// Définition de la classe SoundManager qui implémente l'interface SoundHandler
class SoundManager(private val context: Context) : SoundHandler {
    // Déclaration de la variable mediaPlayer
    private var mediaPlayer: MediaPlayer? = null

    // Implémentation de la méthode playSound de l'interface SoundHandler
    override fun playSound(soundResource: Int) {
        // Libération de tout MediaPlayer précédent
        mediaPlayer?.release()

        // Création d'un nouveau MediaPlayer pour la ressource sonore donnée
        mediaPlayer = MediaPlayer.create(context, soundResource)

        // Définition d'un listener pour libérer le MediaPlayer une fois que le son a fini de jouer
        mediaPlayer?.setOnCompletionListener { mp ->
            mp.release()
        }

        // Début de la lecture du son
        mediaPlayer?.start()
    }
}
